<!-- python3 -m http.server -->
<!DOCTYPE html>
<html>
<head> 
    <meta charset="UTF-8">
    <title>موقع عبدالعزيز</title>
    <style>
        /* Your CSS styles go here */
        h1, #askMe {
            text-align: center;
        }

        #askMe {
            display: block;
            margin: 0 auto;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }

        #askMe:hover {
            background-color: #45a049;
        }
        #container {
            align-self: right;
            border: #45a049;
            border-width: 2px;
            border-style:hidden;
    
        }

        .Ayahp{
        color: black;


        }

        .right-align {
            display: flex;
            flex-direction: row;
            align-items: right;
            justify-content: right;
            margin: 0 auto;
        }
        
    </style>
</head>
<body>
    <!-- Put your HTML code here -->
    <h1>مرحبا بكم في صفحتي</h1>
    <button id="askMe" onclick="askmepleae()">أعطني آيه</button>

    <div id="container">





    </div>

    <script>
        // Your JavaScript code goes here

        function askmepleae() {

            fetch('http://api.alquran.cloud/v1/quran/en')
                .then(response => response.json())
                .then(data => {
                    // Process the JSON response here
                    console.log(data);
                    randomSurah =  77 + Math.floor(Math.random() * 37) + 1;
                    numberOfAyahs = data.data.surahs[113].ayahs.length;
                    randomayah = Math.floor(Math.random() * numberOfAyahs);
                    text = data.data.surahs[randomSurah].ayahs[randomayah].text;
                    if (text.includes("بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ ")) {
                        text = text.replace("بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ ", "");
                    }

                const container = document.querySelector('#container');
                const Ayahp = document.createElement('p');
                Ayahp.style.textAlign = 'right';
                Ayahp.textContent = text;
                Ayahp.classList.add('Ayahp');
                container.innerHTML = '';
                container.appendChild(Ayahp);    


                rightanswer = data.data.surahs[randomSurah].name;

                numberOFwrongeAnswers = 3;
                wronganswers = []; // Initialize the wronganswers array
                for (i = 0 ; i < numberOFwrongeAnswers; i++) {
                    randomSurah =  77 + Math.floor(Math.random() * 37) + 1;
                    wronganswers[i] = data.data.surahs[randomSurah].name;
                }

                answers = [];
                answers[0] = rightanswer;
                const wrongeAnswers = numberOFwrongeAnswers; // Add missing variable declaration
                for (let i = 1; i < wrongeAnswers + 1; i++){ // Correct the loop condition
                    answers[i] = wronganswers[i-1]; 
                } 

               answers.sort(() => Math.random() - 0.5);

                for (let i = 0; i < answers.length ; i++) {
                    let answer = document.createElement('button');
                    answer.textContent = answers[i];
                    answer.style.textAlign = 'right';
                    answer.style.backgroundColor = 'blue';
                    answer.classList.add('right-align');
                    answer.onclick = function() {
                        checkanswer(answers[i]);
                    }
                    
                    container.appendChild(answer);
                }

                })

                



                .catch(error => {
                    // Handle any errors here
                    console.error(error);
                });         


            }

            function checkanswer(answer) {
                    if (answer == rightanswer) {
                        alert("إجابة صحيحة بارك الله فيك");
                    } else {
                        alert("إحابة خاطئة هداك الله. لا بأس حاول مرة أخرى");
                    }

                }
            
                /*
                code : 200
                status : "OK"
                data : {
                    surahs : [
                        0 : ....
                        1 : ....
                        114 : {
                            name : 'الناس'
                            ayahs : [
                                0 : {
                                    number : 1
                                    text : 'قل أعوذ برب الناس'
                                    numberInSurah : 1
                                    juz : 30
                                    manzil : 7
                                    page : 604
                                    ruku : 1
                                    hizbQuarter : 1
                                    sajda : false
                                }
                            ]


                        }


                    }


                }
                

                */
              
        
       
    </script>
</body>
</html>

